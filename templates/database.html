{% extends "base.html" %}
{% block head_content %}
    <title>Database of Radio Sources - RadioChWeb</title>
{% endblock %}

{% block body_content %}
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="/">RadioChWeb</a>
                <div class="navbar-nav">
                    <a class="nav-link" href="{{ url_for('database.list_sources') }}">Manage Sources</a>
                    <a class="nav-link" href="{{ url_for('database.index') }}">Database</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mt-4 site-main">
        <h1>Database Management</h1>
        <ul class="nav nav-tabs" id="dbTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="stream-types-tab" data-bs-toggle="tab" data-bs-target="#stream-types" type="button" role="tab">Stream Types</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="radio-sources-tab" data-bs-toggle="tab" data-bs-target="#radio-sources" type="button" role="tab">Radio Sources</button>
            </li>
        </ul>
        <div class="tab-content" id="dbTabsContent">
            <div class="tab-pane fade show active" id="stream-types" role="tabpanel">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Display Name</th>
                            <th>Protocol</th>
                            <th>Format</th>
                        </tr>
       <body></body>             </thead>
                    <tbody>
                        {% for st in stream_types %}
                        <tr>
                            <td>{{ st.id }}</td>
                            <td>{{ st.display_name }}</td>
                            <td>{{ st.protocol }}</td>
                            <td>{{ st.format }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
  
            <div class="tab-pane fade" id="radio-sources" role="tabpanel">
                <table class="table">
       <body></body>             <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>URL</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for rs in radio_sources %}
                        <tr>
                            <td>{{ rs.id }}</td>
                            <td>{{ rs.name }}</td>
                            <td>{{ rs.stream_url }}</td>
                            {% if current_user.is_authenticated and current_user.is_admin %}
                            <td>
                                <form method="post" action="{{ url_for('radio_source.delete_source', source_id=rs.id) }}" style="display:inline">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                </form>
                            </td>
                            {% endif %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </main>
{% endblock %}